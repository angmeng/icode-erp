<table class="white-line-table">
  <tr class="header_line">
    <th class="check_highlight"></th>
    <th style="font-size: 12px;">PO No.</th>
    <th style="font-size: 12px;">Product I/D</th>
    <th style="font-size: 12px;">Description(in Detail)</th>
    <th style="font-size: 12px;">PO Qty</th>
    <th style="font-size: 12px;">U/M</th>
    <th style="font-size: 12px;">ETA</th>
    <th>RN Qty</th>
    <th>Vendor Part No.</th>
    <th style="font-size: 12px;">Action</th>
  </tr>

  <% po_no.each do |po| %>
    <% if po.present? %>
  
      <% unless po.purchase_order_item_lines.map(&:checked).include?(FALSE) %>
  
              <% if po.purchase_requisition_items.present? %>
                <tr class="header_title" style="height:30px;">
                  <td></td>
                  <td style="font-size: 20px; font-weight: bold; color: blue;" align="center">
                    <%= link_to(purchase_order_path(po.id), { :class => "show_without_refresh_page_1600x900", "data-fancybox-type" => "iframe"}) do %>
                      <%= po.po_no rescue '-' %>
                    <% end %>
                  </td>
                  <td colspan="10"></td>
                </tr>

                <% po.purchase_requisition_items.each do |item| %>
                  <% @poil = PurchaseOrderItemLine.find_by_purchase_requisition_item_id(item.id) %>
                  <% if item.present? %>
                    <tr class="<%= cycle("odd_line", "even_line") %>">
                      <td></td>
                      <td></td>
                      <td align="center">
                        <% if item.product.present? %>
                          <%= render "/product_categories/join_product_category", :pc => item %>
                        <% end %>
                      </td>
                      <td><%= simple_format(item.description) %></td>
                      <td align="center"><%= item.quantity %></td>
                      <td align="center"><%= item.unit_measurement.code rescue '-' %></td>
                      <td align="center"><%= item.eta.strftime("%d-%m-%Y") rescue '-' %></td>
                      <td align="center">
                        <% if @poil.present? %>
                          <% unless @poil.checked == TRUE %>
                            <%= text_field_tag "rn_qty[#{item.id.to_s}][qty]", 0, :size => 10, :id => "supplier_#{item.id.to_s}" %>
                          <% end %>
                        <% end %>
                      </td>
                      <td align="center">
                        <% if @poil.present? %>
                          <% unless @poil.checked == TRUE %>
                            <%= item.product.part_no rescue '-' %>
                          <% end %>
                        <% end %>
                      </td>
                      <td align="center">
                        <% if @poil.present? %>
                          <% unless @poil.checked == TRUE %>
                            <%= check_box_tag "rn_checked[]", item.id %>
                          <% end %>
                        <% end %>
                      </td>
                    </tr>
                  <% end %>
                <% end %>

              <% end %>
      <% end %>
    <% end %>
  <% end %>
</table>