<%= form_for(@sales_order) do |f| %>
  <div id="valid_sales_order">
    <div class="popup_content">
      <table>
        <tr>
          <% if action_name == "edit" %>
            <td width="150"><b>SO No # </b></td>
            <td><%= @sales_order.sales_order_no rescue '-' %></td>
          <% else %>
            <td width="150"><b>Current SO No.</b></td>
            <td><%= company.sn_sales_order_no + 1 %></td>
          <% end %>

          <td width="50"></td>

          <td width="100"><b>SO Date *</b></td>
          <td>
            <%= f.text_field :so_date, :value => Date.today.strftime("%d-%m-%Y"), :class => "mkendo_date", "required validationMessage" => "Please Enter SO Date" %>
            <span class="k-invalid-msg" data-for="sales_order[so_date]"></span>
          </td>

          <td width="50"></td>

          <td width="100"><b>Lot No</b></td>
          <td><%= f.text_field :lot_no, :class => "k-textbox" %></td>
        </tr>

        <tr>
          <td><b>Customer Company *</b></td>
          <td>
            <% if @temp_company.present? %>
              <%= @temp_company.trade_company.name rescue'-'  %>
              <%= f.hidden_field :trade_company_id, :value => @temp_company.trade_company_id  %>
            <% else %>
              <%= f.select :trade_company_id, options_for_select(trade_company_customer_with_code, @sales_order.trade_company_id), { :include_blank => true }, { :class => "mkendo_combobox sales_order_trade_company_id", "required validationMessage" => "Please Enter Customer Company" , :style => "width: 400px;", :onchange => "sales_order_company_change(this)" } %>
            <% end %>
          </td>

          <td></td>

          <td><b>Revision</b></td>
          <td><%= f.text_field :revision, :value => 0, :class => "k-textbox" %></td>

          <td></td>

          <td><b>Mfg Date</b></td>
          <td><%= f.text_field :mfg_date, :class => "mkendo_date" %></td>
        </tr>

        <tr>
          <td><b>P/O#</b></td>
          <td><%= f.text_field :purchase_order_no, :class => "k-textbox" %></td>

          <td></td>

          <td><b>Purpose *</b></td>
          <td><%= f.select :purpose, options_for_select({ "SALES" => SalesOrder::SALES }, @sales_order.purpose), { :include_blank => true }, { :class => "mkendo_combobox", "required validationMessage" => "Please Enter Purpose" } %></td>

          <td></td>

          <td><b>Exp Date</b></td>
          <td><%= f.text_field :exp_date, :class => "mkendo_date" %></td>
        </tr>
        <tr>
          <td><b>Sales Rep.</b></td>
          <td><%= f.text_field :sales_rep, :class => "k-textbox" %></td>
          <td></td>
          <td><b>Currency *</b></td>
          <td><%= f.select :currency_id, options_from_collection_for_select(currency, "id", "name", @sales_order.currency_id),{ :include_blank => true }, { :class => "mkendo_combobox", "required validationMessage" => "Please Enter Currency" } %>

           </td>
        </tr>

        <tr>
          <td><b>Updated By</b></td>
          <td>
            <%= current_user.name %>
            <%= f.hidden_field :updated_by, :value => current_user.id %>
          </td>
          <td></td>
          <td><b>Trade Term *</b></td>
          <td><%= f.select :trade_term_id, options_from_collection_for_select(trade_term, "id", "name", @sales_order.trade_term_id), { :include_blank => true }, { :class => "mkendo_combobox", "required validationMessage" => "Please Enter Trade Term" } %></td>
        </tr>
      </table>
      
      <hr/>
  
      <%= render "new_sales_order_items", :sales_order => @sales_order %>
    </div>
  </div>

  

  
<% end %>
    
<%= render "action_so_entry" %>
  
<% content_for :jquery_script do %>
  <script>
    $(document).ready(function() {   
        
        var validator = $("#valid_sales_order").kendoValidator().data("kendoValidator");
        
        $("#save_button").click(function() {
            if (validator.validate()) {}
            else { alert("Invalid Data Form..."); return false; } 
        });
    });
  </script>
<% end %>
  
