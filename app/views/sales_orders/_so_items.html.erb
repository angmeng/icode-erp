<% if items.present? %>

  <% if action_name == "kiv" %>
    <table id="grid_h495" class="white-line-table zebraLight">
  <% else %>
    <table id="grid_h295" class="white-line-table zebraLight">
  <% end %>
    
    <thead>
      <tr style="background-color: gainsboro;">
        <th>Status</th>
        <th>Product ID</th>
        <th>Description</th>
        <th>Quantity</th>
        <%#*<th>U/M</th>%>
        <th>Selling Price</th>
        <th>ETA Date</th>
        <th>Customer P/O</th>
        <th>Part No</th>
        <th>Amount</th>
      </tr>
    </thead>

    <tbody>
      <% array = [] %>
      
      <% items.each do |sales_order_item| %>
        <tr class="<%= cycle("odd_line", "even_line") %>" controllerName="sales_order_items" rowsId="<%= sales_order_item.id %>">
          <td align="center">
            <% if sales_order_item.status == SalesOrderItem::APPROVED %>
              APPROVED
            <% elsif sales_order_item.status == SalesOrderItem::PENDING %>
              PENDING
            <% elsif sales_order_item.status == SalesOrderItem::KEEP_IN_VIEW %>
              KIV  
            <% elsif sales_order_item.status == SalesOrderItem::IN_PROCESS %>
              IN PROGRESS
            <% elsif sales_order_item.status == SalesOrderItem::PRODUCTION %>
              PRODUCTION
            <% else %>
              -
            <% end %>
          </td>
          
          <td align="center"><%= render "/product_categories/join_product_category", :pc => sales_order_item %></td>
          <td><%= simple_format(sales_order_item.product.desc) %></td>
          <td align="center"><%= sales_order_item.quantity %></td>
          <!--td align="center"><%#= sales_order_item.unit_measurement.code rescue '-' %></td-->
          <td align="right"><%= four_precision(sales_order_item.unit_price) %></td>
          <td align="center"><%= sales_order_item.eta.strftime("%d-%m-%Y") rescue '-' %></td>
          <td align="center"><%= sales_order_item.customer_po rescue '-' %></td>
          <td align="center"><%= sales_order_item.part_no rescue '-' %></td>
          <td align="right"><%= iproduct(sales_order_item.unit_price, sales_order_item.quantity) %></td>
          <!--td align="center"><%#= sales_order_item.current_stock rescue '-' %></td-->
          <!--td align="center"><%#= sales_order_item.quantity - sales_order_item.current_stock %></td-->
          
          <% array << sales_order_item.unit_price * sales_order_item.quantity %>
        </tr>
      <% end %>
    </tbody>
      
    <%#*<tr class="footer_line">%>
      <%#*<td colspan="7"></td>%>
      <%#*<td align="right">%>
        <%#= two_precision(array.sum) %>
      <%#*</td>%>
      <%#*<td colspan="3"></td>%>
    <%#*</tr>%>
  </table>
      
  <div align="right">Total: <%= two_precision(array.sum) %></div>
<% end %>